{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function requestImages(query) {\n  const axiosConfig = {\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n      key: '48827874-cd9b9c73a8babeb73b5d7fdc9',\n      q: `${query}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  };\n  const pixabayAxios = new axios.create(axiosConfig);\n  return pixabayAxios.get('');\n}\n","function imageTemplate(img) {\n  const {\n    webformatURL,\n    largeImageURL,\n    likes,\n    views,\n    comments,\n    downloads,\n    tags,\n  } = img;\n  const uniqueTags = new Set(tags.split(', '));\n  const altAttr = Array.from(uniqueTags.values()).join(', ');\n  return `<li>\n            <a href=\"${largeImageURL}\">\n              <img src=\"${webformatURL}\" alt=\"Tags: ${altAttr}\" />\n            </a>\n            <table class=\"photo-info\">\n              <tr>\n                <th>Likes</td>\n                <th>Views</td>\n                <th>Comments</td>\n                <th>Downloads</td>\n              </tr>\n              <tr>\n                <td>${likes}</td>\n                <td>${views}</td>\n                <td>${comments}</td>\n                <td>${downloads}</td>\n              </tr>\n            </table>\n          </li>`;\n}\nexport function imagesTemplate(imgs) {\n  return imgs.map(imageTemplate).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightBox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { requestImages } from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-functions';\n\nconst refs = {\n  queryForm: document.querySelector('[data-image-query]'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n};\nconst optionsLightBox = {\n  close: false,\n  showCounter: false,\n  captionDelay: 250,\n  captionsData: 'alt',\n  scrollZoom: 'false',\n  scrollZoomFactor: 'false',\n  disableScroll: 'true',\n};\nconst galleryLightBox = new simpleLightBox('.gallery a', optionsLightBox);\n\nrefs.queryForm.addEventListener('submit', event => {\n  event.preventDefault();\n  refs.gallery.innerHTML = '';\n  const queryText = event.target.elements.query.value.trim();\n  if (!queryText) {\n    iziToast.warning({\n      message: 'Query field is empty. Please enter your query!',\n      position: 'center',\n    });\n    return;\n  }\n  refs.loader.classList.remove('hidden');\n  requestImages(queryText)\n    .then(response => {\n      if (response.data.hits.length) {\n        refs.loader.classList.add('hidden');\n        refs.gallery.innerHTML = imagesTemplate(response.data.hits);\n        galleryLightBox.refresh();\n      } else {\n        refs.loader.classList.add('hidden');\n        iziToast.info({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'center',\n        });\n      }\n    })\n    .catch(error => {\n      if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        iziToast.error({\n          message: `${error.response.data}`,\n          position: 'center',\n        });\n        iziToast.error({\n          message: `${error.response.status}`,\n          position: 'center',\n        });\n        iziToast.error({\n          message: `${error.response.headers}`,\n          position: 'center',\n        });\n      } else if (error.request) {\n        // The request was made but no response was received\n        // `error.request` is an instance of XMLHttpRequest in the browser\n        //  and an instance of http.ClientRequest in node.js\n        iziToast.error({\n          message: `${error.request}`,\n          position: 'center',\n        });\n      } else {\n        // Something happened in setting up the request\n        // that triggered an Error\n        iziToast.error({\n          message: `Error: ${error.message}`,\n          position: 'center',\n        });\n      }\n      iziToast.error({\n        message: `${error.config}`,\n        position: 'center',\n      });\n    });\n});\n"],"names":["requestImages","query","axiosConfig","axios","imageTemplate","img","webformatURL","largeImageURL","likes","views","comments","downloads","tags","uniqueTags","altAttr","imagesTemplate","imgs","refs","optionsLightBox","galleryLightBox","simpleLightBox","event","queryText","iziToast","response","error"],"mappings":"owBAEO,SAASA,EAAcC,EAAO,CACnC,MAAMC,EAAc,CAClB,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,EAAG,GAAGD,CAAK,GACX,WAAY,QACZ,YAAa,aACb,WAAY,MACb,CACL,EAEE,OADqB,IAAIE,EAAM,OAAOD,CAAW,EAC7B,IAAI,EAAE,CAC5B,CCfA,SAASE,EAAcC,EAAK,CAC1B,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,KAAAC,CACD,EAAGP,EACEQ,EAAa,IAAI,IAAID,EAAK,MAAM,IAAI,CAAC,EACrCE,EAAU,MAAM,KAAKD,EAAW,QAAQ,EAAE,KAAK,IAAI,EACzD,MAAO;AAAA,uBACcN,CAAa;AAAA,0BACVD,CAAY,gBAAgBQ,CAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAUvCN,CAAK;AAAA,sBACLC,CAAK;AAAA,sBACLC,CAAQ;AAAA,sBACRC,CAAS;AAAA;AAAA;AAAA,gBAI/B,CACO,SAASI,EAAeC,EAAM,CACnC,OAAOA,EAAK,IAAIZ,CAAa,EAAE,KAAK,EAAE,CACxC,CC3BA,MAAMa,EAAO,CACX,UAAW,SAAS,cAAc,oBAAoB,EACtD,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EACMC,EAAkB,CACtB,MAAO,GACP,YAAa,GACb,aAAc,IACd,aAAc,MACd,WAAY,QACZ,iBAAkB,QAClB,cAAe,MACjB,EACMC,EAAkB,IAAIC,EAAe,aAAcF,CAAe,EAExED,EAAK,UAAU,iBAAiB,SAAUI,GAAS,CACjDA,EAAM,eAAc,EACpBJ,EAAK,QAAQ,UAAY,GACzB,MAAMK,EAAYD,EAAM,OAAO,SAAS,MAAM,MAAM,OACpD,GAAI,CAACC,EAAW,CACdC,EAAS,QAAQ,CACf,QAAS,iDACT,SAAU,QAChB,CAAK,EACD,MACD,CACDN,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrCjB,EAAcsB,CAAS,EACpB,KAAKE,GAAY,CACZA,EAAS,KAAK,KAAK,QACrBP,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCA,EAAK,QAAQ,UAAYF,EAAeS,EAAS,KAAK,IAAI,EAC1DL,EAAgB,QAAO,IAEvBF,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCM,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,QACpB,CAAS,EAET,CAAK,EACA,MAAME,GAAS,CACVA,EAAM,UAGRF,EAAS,MAAM,CACb,QAAS,GAAGE,EAAM,SAAS,IAAI,GAC/B,SAAU,QACpB,CAAS,EACDF,EAAS,MAAM,CACb,QAAS,GAAGE,EAAM,SAAS,MAAM,GACjC,SAAU,QACpB,CAAS,EACDF,EAAS,MAAM,CACb,QAAS,GAAGE,EAAM,SAAS,OAAO,GAClC,SAAU,QACpB,CAAS,GACQA,EAAM,QAIfF,EAAS,MAAM,CACb,QAAS,GAAGE,EAAM,OAAO,GACzB,SAAU,QACpB,CAAS,EAIDF,EAAS,MAAM,CACb,QAAS,UAAUE,EAAM,OAAO,GAChC,SAAU,QACpB,CAAS,EAEHF,EAAS,MAAM,CACb,QAAS,GAAGE,EAAM,MAAM,GACxB,SAAU,QAClB,CAAO,CACP,CAAK,CACL,CAAC"}